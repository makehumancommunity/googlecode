#version 120

/**
 * Lit Sphere (spherically mapped captured light) shader.
 * Has the effect of a specular material, shaded relative to the camera without
 * lights.
 * The normal is used as UV coordinates of the litsphere texture, which is a
 * spherically shaped mapping of colors for all angles that normals can face in
 * the half sphere facing the camera.
**/

#define DIFFUSE

#ifdef DIFFUSE
    uniform sampler2D diffuseTexture;
#endif

// Lit Sphere texture
uniform sampler2D litsphereTexture;

// Inputs
varying vec3 vNormal;

// Outputs
vec3 diffuse;


void main() {
    diffuse = texture2D(litsphereTexture, vec2(vNormal.xyz * vec3(0.495) + vec3(0.5))).rgb;

    #ifdef DIFFUSE
        gl_FragColor.rgb = diffuse * texture2D(diffuseTexture, gl_TexCoord[0].xy).rgb;
    #else
        gl_FragColor.rgb = diffuse;
    #endif

    gl_FragColor.a = 1.0;
}
